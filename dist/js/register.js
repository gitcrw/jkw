"use strict";!function(){var o=/^1[3-9]\d{9}$/;$("#phone").blur(function(){return $(this).val()?o.test($(this).val())?($(this).css("border","1px solid #ddd"),$(".phone_info").html(""),void $.ajax({type:"post",url:"../api/checkphone.php",data:{phone:$("#phone").val()},success:function(o){if("no"==o)return $("#phone").css("border","1px solid #c33"),$(".phone_info").html("手机号已经注册"),$("#phone").attr("ok","no"),!1;$("#phone").attr("ok","yes")}})):($(this).css("border","1px solid #c33"),$(".phone_info").html("请输入正确手机号"),$(this).attr("ok","no"),!1):($(this).css("border","1px solid #c33"),$(".phone_info").html("手机号不能为空"),$(this).attr("ok","no"),!1)}),$("#phone").keyup(function(){o.test($(this).val())?($(this).css("border","1px solid #ddd"),$(".phone_info").html(""),$(this).attr("ok","yes")):($(this).css("border","1px solid #c33"),$(".phone_info").html("请输入正确手机号"),$(this).attr("ok","no"))});var e=new GVerify({id:"codepic",type:"blend"});function t(){var o=$("#code").val();o?e.validate(o)?($("#code").css("border","1px solid #ddd"),$(".piccode_info").html(""),$("#code").attr("ok","yes")):($("#code").css("border","1px solid #c33"),$(".piccode_info").html("图形验证码错误"),$("#code").attr("ok","no")):($("#code").css("border","1px solid #c33"),$(".piccode_info").html("请输入图形验证码"),$("#code").attr("ok","no"))}$("#code").blur(function(){t()}),$("#code").keyup(function(){t()}),$("#nolook").click(function(){e=new GVerify({id:"codepic",type:"blend"}),$("#code").val()&&t()}),$("#phonecode").blur(function(){$(this).val()?($(this).css("border","1px solid #ddd"),$(".phonecode_info").html("")):($(this).css("border","1px solid #c33"),$(".phonecode_info").html("短信验证码不能为空"))});var s="",c=!0;$(".getcode").click(function(){var o=$("#phone").attr("ok"),e=$("#code").attr("ok");if("yes"==o||$("#phone").val()||($("#phone").css("border","1px solid #c33"),$(".phone_info").html("手机号不能为空")),"yes"==e||$("#code").val()||($("#code").css("border","1px solid #c33"),$(".piccode_info").html("请输入图形验证码")),"yes"==o&&"yes"==e){if(c){$.ajax({type:"post",url:"../api/duanxin.php",data:{userphone:$("#phone").val()},success:function(o){s=o}}),$(".getcode").val("重试60");var t=setInterval(function(){if(d<=1)d=0,$(".getcode").val("获取验证码"),clearInterval(t),c=!0;else{var o="重试"+--d;$(".getcode").val(o)}},1e3),d=60}c=!1}});var d=/^.{6,16}$/;function n(){d.test($(".pwd").val())?($(".pwd").css("border","1px solid #ddd"),$(".pwd_info").html(""),$(".pwd").attr("ok","yes")):($(".pwd").css("border","1px solid #c33"),$(".pwd_info").html("请输入6~16位的密码"),$(".pwd").attr("ok","no"))}function i(){$(".pwd").val()==$(".qrpwd").val()?($(".qrpwd").css("border","1px solid #ddd"),$(".qrpwd_info").html(""),$(".qrpwd").attr("ok","yes")):($(".qrpwd").css("border","1px solid #c33"),$(".qrpwd_info").html("密码输入不一致"),$(".qrpwd").attr("ok","no"))}$(".pwd").blur(function(){$(this).val()?($(this).css("border","1px solid #ddd"),$(".pwd_info").html(""),n(),i()):($(this).css("border","1px solid #c33"),$(".pwd_info").html("新密码不能为空"))}),$(".pwd").keyup(function(){n(),i()}),$(".qrpwd").keyup(function(){i()}),$("#protocol").attr("ok","yes"),$("#protocol").click(function(){this.checked?$(this).attr("ok","yes"):$(this).attr("ok","no")}),$(".getcode").attr("ok","yes"),$(".register-btn").click(function(){var t=[];$("#phonecode").attr("ok","yes"),$("#phonecode").val()==s?($("input").each(function(o,e){"yes"!=$(e).attr("ok")&&t.push(e)}),t.length?$("#protocol").is(":checked")?alert("请完善信息"):alert("请同意条款"):(alert("注册成功！"),$.ajax({type:"post",url:"../api/adduser.php",data:{phone:$("#phone").val(),password:$(".pwd").val()},success:function(){window.location.replace("login.html")}}))):($("#phonecode").css("border","1px solid #c33"),$(".phonecode_info").html("短信验证码错误"))})}();